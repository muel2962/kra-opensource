# kra-opensource

봇의 모든 기능과 설정 방법이 포함된 `README.md` 파일 예시입니다. 이 내용을 복사해서 프로젝트 최상위 폴더에 저장하세요.

---

# 🪙 Discord Coin Bot (KRA)

이 봇은 디스코드 내에서 가상 화폐(KC)를 관리하고, 동전 돌리기 게임, 도박, 사용자 레벨 시스템 및 개발자 전용 관리 도구를 제공하는 파이썬 기반 봇입니다.

## 🚀 주요 기능

### 🎮 일반 명령어

* **`/가입`**: 데이터베이스에 유저 정보를 등록하고 초기 자금(1,000 KC)을 받습니다.
* **`/돈`**: 현재 자신의 보유 코인과 순위, 레벨을 확인합니다.
* **`/동전돌리기 [금액]`**: 50% 확률로 배팅을 진행합니다. 승리 시 배팅금액의 3배를 획득하며 레벨 보너스가 적용됩니다.
* **`/순위`**: 서버 내 코인 보유량 순위를 확인합니다.

### 🛠️ 개발자 관리 도구 (`/dev`)

개발자 전용 명령어는 `.env`에 등록된 `DEV_ID` 사용자만 사용할 수 있습니다.

* **코인 얻기 (get)**: 특정 사용자에게 코인을 지급합니다.
* **코인 압류 (seizure)**: 특정 사용자의 코인을 차감합니다. (잔액보다 많이 압류할 경우 0원으로 조정)
* **서버 목록 확인 (servers)**: 봇이 참여 중인 서버 이름, ID, 인원수를 지연 응답(Defer) 방식으로 빠르게 확인합니다.
* **코인 이벤트 시작 (event)**: 특정 채널에 선착순 버튼 이벤트를 생성합니다. (봇 재시작 후에도 유지되는 Persistent View 적용)

## ⚙️ 설정 방법 (Setup)

### 1. 필수 라이브러리 설치

```bash
pip install discord.py aiosqlite python-dotenv

```

### 2. 환경 변수 설정 (`.env`)

프로젝트 루트 폴더에 `.env` 파일을 생성하고 아래 내용을 입력하세요.

```env
BOT_TOKEN=여기에_봇_토큰_입력
DEV_ID=개발자_디스코드_ID
EVENT_CHANNEL_ID=이벤트가_발생할_채널_ID
GUILD_ID=명령어를_즉시_동기화할_서버_ID (선택사항)

```

### 3. 실행

```bash
python main.py

```

## 📂 프로젝트 구조

* `main.py`: 봇의 진입점. Cog 로드 및 상태 메시지(서버/유저수) 업데이트 관리.
* `database.py`: SQLite DB 초기화 및 사용자 정보 조회 로직.
* `cogs/`: 봇의 기능별 모듈화 파일들.
* `economy.py`: 경제 시스템 및 게임 명령어.
* `dev.py`: 개발자 전용 도구 및 이벤트 시스템.



## 📝 참고 사항

* **상태 메시지**: 봇의 상태 메시지는 10초마다 서버 수와 총 유저 수를 번갈아 표시합니다.
* **안정성**: `/dev` 명령어는 대규모 서버 목록 조회 시에도 `Interaction Failed`가 발생하지 않도록 지연 응답 처리가 되어 있습니다.
* **영속성**: 이벤트 버튼은 봇이 재시작되어도 `main.py`에서 자동으로 재등록되어 정상 작동합니다.
